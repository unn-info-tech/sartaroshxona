{% extends 'main/base.html' %}
{% load static %}

{% block content %}
{% include 'main/navbar.html' %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="{% static '/css/prof.css' %}">
<script src="{% static 'js/prof.js' %}"></script>

<div class="container">
  <h1>User Profile</h1>
  <!-- Read-only mode -->
  <div id="readOnlyUserMode">
      <p>Username: <input type="text" id="username" value="{{ user_form.username.value }}" disabled></p>
      <p>Email: <input type="email" id="email" value="{{ user_form.email.value }}" disabled></p>
      <p>Phone Number: <input type="text" name="phone_number" value="{{ user_form.phone_number.value }}" id="phone_number" disabled></p>

      <button id="editUserButton">Edit</button>
  </div>

  <!-- Edit mode -->
  <div id="editUserForm" style="display: none;">
      <form method="post">
          {% csrf_token %}
          <p>Username: <input type="text" name="username" value="{{ user_form.username.value }}" id="username"></p>
          <p>Email: <input type="email" name="email" value="{{ user_form.email.value }}" id="email"></p>
          <p>Phone Number: <input type="text" name="phone_number" value="{{ user_form.phone_number.value }}" id="phone_number"></p>

          <button id="saveUserButton" type="submit" name="user_info_form">Save Changes</button>
          <button id="cancelUserButton" type="button">Cancel</button>
      </form>
  </div>

  <!-- Read-only mode for Password Change -->
  <div id="readOnlyPasswordMode">
    <p>Password: <input type="password" name="old_password" value="********" id="old_password" disabled></p>
    <button id="editPasswordButton">Change Password</button>
  </div>

  <!-- Edit mode for Password Change -->
  <div id="editPasswordForm" style="display: none;">
    <form method="post">
        {% csrf_token %}
        {{ password_change_form.as_p}}
        <button id="savePasswordButton" type="submit" name="password_change_form">Save Password</button>
        <button id="cancelPasswordButton" type="button">Cancel</button>
    </form>
  </div>

   <!-- Add a new container at the bottom -->
   <div class="bottom-container">
        <!-- Add Logout and Delete Account Buttons within the new container -->
        <form method="post" action="{% url 'logout' %}" class="logout-form">
            {% csrf_token %}
            <button style="border-color: red; padding: 10px; margin-left: 10px;" type="submit" onclick="return confirm('Are you sure you want to log out?')" class=class="logout-form">Log Out</button>
        </form>

        <form method="post" action="{% url 'delete_account' %}" class="delete-account-form">
            {% csrf_token %}
            <button style="border-color: red; padding: 10px; margin-left: 10px;" type="submit" onclick="return confirm('Are you sure you want to delete your account?')" class="delete-account-button">Delete Account</button>
        </form>
    </div>

</div>

{% endblock %}